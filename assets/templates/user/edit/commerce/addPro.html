<md-dialog aria-label="Manage Products" class="md-dialog-addProduct">
    <md-dialog-content>
        <md-tabs  md-no-ink-bar ="false"  md-no-bar  md-center-tabs="false" md-selected="selectedTab"  md-autoselect="false"
                 md-dynamic-height="true">
            <!--Add Product Tab 1 content -->
            <md-tab ng-disabled="enableTab" disabled="true">
                <md-tab-label>Product Type</md-tab-label>
                <md-tab-body>
                    <div class="md-dialog-header">
                        <h1>Choose Product Type</h1>
                    </div>
                    <div id="Navigation" class="md-dialog-full">
                        <div class="products-options">
                            <md-list flex>
                                <md-list-item class="md-3-line" ng-repeat="type in productTypes" ng-click="addType(type,1)">
                                    <div class="md-list-item-text" layout="column">
                                        <h1>{{type.type}}</h1>
                                        <h4>{{type.description}}</h4>
                                        <p class="color-link">{{type.status}}</p>
                                    </div>
                                </md-list-item>
                            </md-list>
                        </div>
                    </div>
                    <div class="md-dialog-buttons">
                        <div class="inner-section">
                            <md-button class="me-default-button" ng-click="answer('cancel')">Cancel</md-button>
                        </div>
                    </div>
                </md-tab-body>
            </md-tab>

            <!-- Add Product Tab 2 content -->
            <md-tab ng-disabled="enableTab">
                <md-tab-body>

                    <md-tab-label>Add Details</md-tab-label>
                    <div class="md-dialog-header">
                        <h1>Add Product</h1>
                    </div>
                    <md-content layout-padding>
                    <form name="productForm">
                        <div class="md-dialog-main">
                            <div class="clearfix">

                                <md-input-container class="md-block" flex="50">
                                    <label>Name</label>
                                    <input required md-maxlength="15"  name="name" ng-model="product.name">
                                    <div ng-messages="productForm.name.$error" ng-show="productForm.name.$dirty">
                                        <div ng-message="required">Name is required.</div>
                                        <div ng-message="md-maxlength">The name must be less than 15 characters long.</div>
                                    </div>
                                </md-input-container>

                                <md-input-container class="md-block">
                                    <label>Description</label>
                                    <textarea type="area" required  md-maxlength="100" name="detailedDesc" rows="2"  ng-model="product.detailedDesc" > </textarea>

                                    <div ng-messages="productForm.detailedDesc.$error" ng-show="productForm.detailedDesc.$dirty">
                                        <div ng-message="required">Description is required.</div>
                                        <div ng-message="md-maxlength">The description must be less than 100 characters long.</div>
                                    </div>
                                </md-input-container>


                                <md-input-container class="md-block">
                                    <label>SKU</label>
                                    <input md-maxlength="10"
                                           required
                                           name="sku"
                                           ng-model="product.sku"
                                           ng-pattern="/^\d*[1-9]\d*$/"
                                           ng-readonly="product.checked"
                                           ng-click="check(index)">
                                    <div ng-messages="productForm.sku.$error" ng-show="productForm.sku.$dirty">
                                        <div ng-message="required">SKU is required.</div>
                                        <div ng-message="md-maxlength">The SKU must be less than 10 characters long.</div>
                                        <div ng-message="pattern" class="my-message">That doesn't look like a valid SKU</div>
                                    </div>
                                </md-input-container>

                                <md-input-container ng-hide="mainMenuHide">
                                    <label>Main Menu</label>
                                    <md-select
                                            md-no-asterisk = flase
                                            placeholder="Select Main Menu"
                                            ng-model="product.mainId"
                                            ng-change="setChild(product.mainId)">
                                        <md-option ng-value="main.id" ng-repeat="main in mainMenu">{{main.name}}
                                        </md-option>
                                    </md-select>
                                </md-input-container>

                                <!--Disabled for now-->
                                <md-input-container ng-hide="childMenuHide">
                                    <label>Sub Category</label>
                                    <md-select class="" placeholder="Select Child Menu" ng-model="product.childId"
                                               required>
                                        <md-option ng-value="child.id" ng-repeat="child in child">{{child.name}}
                                        </md-option>
                                    </md-select>
                                </md-input-container>
                            </div>
                        </div>
                        <div class="md-dialog-buttons">
                            <div class="inner-section">
                                <md-button class="me-default-button" ng-click="answer('cancel')">Cancel</md-button>
                                <md-button class="me-default-button" ng-disabled="productForm.$invalid" type="submit"ng-click="generalDetails(product,2)">Next</md-button>
                            </div>
                        </div>
                    </form>
                    </md-content>
                </md-tab-body>
            </md-tab>

            <!--Product Variants Tab-->
            <md-tab class="price-varients-tab" ng-if="isDigital==false" md-no-select-click ="true" ng-disabled=enableTab >
                <md-tab-label>Price & Variants</md-tab-label>
                <md-tab-body>
                    <div class="md-dialog-header">
                        <h1>Price & Variants</h1>
                    </div>
                    <form name="priceAndVariantsForm" novalidate>
                    <div class="md-dialog-main">
                        <table class="me-hours-table">
                            <thead>
                            <th width="25%">Product Name</th>
                            <th >Sku</th>
                            <th width="18%">
                                <md-select id="selection" class="" placeholder="Select" ng-change="setPattern(selection)" ng-model="selection" required>
                                    <md-option ng-value="child.name" ng-repeat="child in sizeOrWeight">{{child.name}}
                                    </md-option>
                                </md-select>
                            </th>
                            <th>Price</th>
                            <th>Quantity</th>
                            <th width="13%" style="text-align: center;" >New</th>
                            <th>Delete</th>
                            </thead>
                            <tbody>

                            <tr ng-repeat="data in product.variants">
                                <td ng-model="data.name"><p class="product-name">{{data.name}}</p></td>
                                <td>
                                    <md-input-container style="width: 90px;">
                                        <input ng-blur="validateInputValue(data.sku,'sku')"  md-maxlength="10"
                                               required
                                               name="sku_{{$index}}"
                                               ng-model="data.sku"
                                               ng-pattern="/^\d*[1-9]\d*$/"
                                               ng-readonly="product.checked"
                                               ng-click="check($index)">
                                        <div ng-messages="priceAndVariantsForm['sku_'+$index].$error" ng-show="priceAndVariantsForm['sku_'+$index].$dirty">
                                            <div ng-message="required">SKU is required.</div>
                                            <div ng-message="pattern" style="line-height:13px;" class="my-message">Invalid SKU</div>
                                        </div>
                                    </md-input-container>
                                </td>
                                <td>
                                    <!--<md-input-container>-->
                                        <!--<input md-maxlength="8"-->
                                               <!--required-->
                                               <!--type="text"-->
                                               <!--name="size_{{$index}}"-->
                                               <!--ng-model="data.size">-->
                                        <!--<div ng-messages="priceAndVariantsForm['size_'+$index].$error">-->
                                            <!--<div ng-message="required">Size/Wight is required.</div>-->
                                            <!--<div ng-message="md-maxlength">Must be less than 8 characters.</div>-->
                                        <!--</div>-->
                                    <!--</md-input-container>-->
                                  <md-input-container class="md-container-modify">
                                    <input ng-blur="validateInputValue(data.size,'size')" class="product-name-column-input" name="size_{{$index}}" md-maxlength="8"
                                           ng-pattern="customPattern" ng-model="data.size" required>
                                      <div ng-messages="priceAndVariantsForm['size_' + $index].$error " ng-show="priceAndVariantsForm['size_' + $index].$dirty">
                                          <div ng-message="pattern" class="my-message">Invalid value</div>
                                          <div ng-message="required" class="my-message">Required!</div>
                                      </div>
                                  </md-input-container>
                                </td>
                                <td>
                                  <md-input-container class="md-container-modify">
                                    <input type="number"  min="0.01" name="price_{{$index}}" ng-pattern="/^\d+(?:[.]\d{1,2}|$)$/" maxlength="8" ng-model="data.price" required ignore-mouse-wheel>
                                      <div ng-messages="priceAndVariantsForm['price_' + $index].$error" ng-show="priceAndVariantsForm['price_' + $index].$dirty">
                                          <div ng-message="pattern">Invalid price</div>
                                          <div ng-message="required" class="my-message">Required!</div>
                                      </div>

                                  </md-input-container>
                                <!--<span ng-show="priceAndVariantsForm['price_' + $index].$error.maxlength">Too lengthy</span></td>-->

                                <td>
                                  <md-input-container class="md-container-modify">
                                    <input type="number" name="qty_{{$index}}" min="1"  ng-pattern="/^\d+(?:[.]\d{1,}|$)$/" maxlength="8" ng-model="data.quantity" required ignore-mouse-wheel>
                                      <div ng-messages="priceAndVariantsForm['qty_' + $index].$error " ng-show="priceAndVariantsForm['qty_' + $index].$dirty">
                                          <div ng-message="pattern">Invalid quantity</div>
                                          <div ng-message="required" class="my-message">Required!</div>
                                      </div>

                                  </md-input-container>
                                </td>
                                    <!--<span ng-show="priceAndVariantsForm['qty_' + $index].$error.maxlength">Too lengthy</span></td>-->
                                <td>
                                    <div disable-all="priceAndVariantsForm.$invalid">
                                    <div class="add-icon icon icon-plus" ng-click="addVariant(selection,product,$index,data)"></div>
                                    </div>
                                </td>

                                <td><img class="delete-icon" style="height:16px" src="../../../images/delete-icon.png" ng-click="deleteVariant($index,data)">
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                        <div class="md-dialog-buttons" style="padding:0 39px">
                            <div class="inner-section">
                                <md-button class="me-default-button" ng-click="answer('cancel')">Cancel</md-button>
                                <md-button type="submit" ng-disabled="priceAndVariantsForm.$invalid" class="me-default-button" ng-click="addProductVariants(selection,variantsList,3)">Next</md-button>
                            </div>
                        </div>
                    </form>

                </md-tab-body>
            </md-tab>

            <md-tab ng-if="isDigital==true">
                <md-tab-label>Pricing & Upload</md-tab-label>
                <md-tab-body>
                    <div class="md-dialog-header">
                        <h1>Pricing & Uploads</h1>
                    </div>
                    <div class="md-dialog-main">
                        <div class="file-upload-wrapper clearfix">
                            <p class="file-upload-msg">Select a product to upload</p>
                            <div class="pull-left">
                                <div class="me-file-upload rounded">
                                    <div class="upload-wrapper">
                                        <input type="button" ngf-select ng-model="File" ngf-accept="*"
                                               aria-invalid="true" ngf-change="changeImage()" required/>
                                        <span>select product</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="uploaded-section clearfix">
                            <div class="uploaded-new-image">
                                <p>Selected Product</p>
                                <img ng-if="File == null" ng-src="../../../images/medium-placeholder.png" width="150"
                                     height="150"/>
                                <img ng-if="File != null" ngf-src="File" width="150" height="150"/>

                                <button class="me-upload-image-button" ng-click="addFile(File)">Upload Image
                                </button>
                            </div>
                            <div class="uploaded-old-images">
                                <p>Add Pricing</p>
                                <fieldset>
                                    <p>Product Price</p>
                                    <input type="number" name="name" ng-model="variants.price" id="input-price"
                                           class="me-xs-input reset-inline" required ignore-mouse-wheel/>
                                </fieldset>
                            </div>
                        </div>
                    </div>
                    <div class="md-dialog-buttons">
                        <div class="inner-section">
                            <md-button class="me-default-button" ng-click="answer('cancel')">Cancel</md-button>
                            <md-button class="me-default-button" ng-click="nextStep3Digital(3,product,variants)">Next
                            </md-button>
                        </div>
                    </div>
                </md-tab-body>
            </md-tab>


            <md-tab ng-disabled="enableTab">
                <md-tab-label>Upload Image</md-tab-label>
                <md-tab-body>
                    <div class="md-dialog-header">
                        <h1>Upload Image</h1>
                    </div>

                    <div class="md-dialog-main">
                        <div class="file-upload-wrapper2 clearfix">
                            <div class="inputField">
                                <div class="btn-material">
                                    <span>Select a image</span>
                                    <input type="file" value="file" type="file" ng-click = "cropImage()" id="fileInput" >
                                </div>
                            </div>

                            <div class="cropArea">
                                <img-crop area-type="square" image="myImage" result-image="picFile"></img-crop>
                            </div>
                        </div>

                        <div class="uploaded-section image-upload clearfix">
                            <div class="uploaded-new-image2">
                                <img ng-if="picFile == null" ng-src="../../../images/medium-placeholder.png" width="150"
                                     height="150" style="display:none" />
                                <img ng-if="picFile != null" ngf-src="picFile" width="150" height="150" style="display:none" />

                                <button class="btn-material" ng-click="addImage(picFile)">Crop and Upload</button>
                            </div>
                            <div class="uploaded-old-images">
                                <p>Uploaded Product Images</p>
                                <div class="old-images clearfix">
                                    <div class="old-image">
                                        <input type="button" ng-click="deleteImg(0)" value='delete'
                                               class="image-delete-button"/>
                                        <img ng-click="setImage()" ng-if="tmpImage[0] == null"
                                             src="../../../images/small-placeholder.png" width="80" height="80"/>
                                        <img id="1" ng-click="setImage(0)" ng-if="tmpImage[0] !== null" ngf-src="tmpImage[0]"
                                             width="80" height="80"/>
                                    </div>
                                    <div class="old-image">
                                        <input type="button" ng-click="deleteImg(1)" value='delete'
                                               class="image-delete-button"/>
                                        <img ng-click="setImage()" ng-if="tmpImage[1] == null"
                                             src="../../../images/small-placeholder.png" width="80" height="80"/>
                                        <img  id="2" ng-click="setImage(1)" ng-if="tmpImage[1] !== null" ngf-src="tmpImage[1]"
                                             width="80" height="80"/>
                                    </div>
                                    <div class="old-image">
                                        <input type="button" ng-click="deleteImg(2)" value='delete'
                                               class="image-delete-button"/>
                                        <img ng-click="setImage()" ng-if="tmpImage[2] == null"
                                             src="../../../images/small-placeholder.png" width="80" height="80"/>
                                        <img id="3" ng-click="setImage(2)" ng-if="tmpImage[2] !== null" ngf-src="tmpImage[2]"
                                             width="80" height="80"/>
                                    </div>
                                    <div class="old-image">
                                        <input type="button" ng-click="deleteImg(3)" value='delete'
                                               class="image-delete-button"/>
                                        <img ng-click="setImage()" ng-if="tmpImage[3] == null"
                                             src="../../../images/small-placeholder.png" width="80" height="80"/>
                                        <img id="4" ng-click="setImage(3)" ng-if="tmpImage[3] !== null" ngf-src="tmpImage[3]"
                                             width="80" height="80"/>
                                    </div>
                                    <div class="old-image">
                                        <input type="button" ng-click="deleteImg(4)" value='delete'
                                               class="image-delete-button"/>
                                        <img ng-click="setImage()" ng-if="tmpImage[4] == null"
                                             src="../../../images/small-placeholder.png" width="80" height="80"/>
                                        <img id="5" ng-click="setImage(4)" ng-if="tmpImage[4] !== null" ngf-src="tmpImage[4]"
                                             width="80" height="80"/>
                                    </div>
                                    <div class="old-image">
                                        <input type="button" ng-click="deleteImg(5)" value='delete'
                                               class="image-delete-button"/>
                                        <img ng-click="setImage()" ng-if="tmpImage[5] == null"
                                             src="../../../images/small-placeholder.png" width="80" height="80"/>
                                        <img id="6" ng-click="setImage(5)" ng-if="tmpImage[5] !== null" ngf-src="tmpImage[5]"
                                             width="80" height="80"/>
                                    </div>
                                    <div class="old-image">
                                        <input type="button" ng-click="deleteImg(6)" value='delete'
                                               class="image-delete-button"/>
                                        <img ng-click="setImage()" ng-if="tmpImage[6] == null"
                                             src="../../../images/small-placeholder.png" width="80" height="80"/>
                                        <img id="7" ng-click="setImage(6)" ng-if="tmpImage[6] !== null" ngf-src="tmpImage[6]"
                                             width="80" height="80"/>
                                    </div>
                                    <div class="old-image">
                                        <input type="button" ng-click="deleteImg(7)" value='delete'
                                               class="image-delete-button"/>
                                        <img ng-click="setImage()" ng-if="tmpImage[7] == null"
                                             src="../../../images/small-placeholder.png" width="80" height="80"/>
                                        <img id="8" ng-click="setImage(7)" ng-if="tmpImage[7] !== null" ngf-src="tmpImage[7]"
                                             width="80" height="80"/>
                                    </div>

                            </div>
                        </div>
                    </div>
                    <div class="md-dialog-buttons">
                        <div class="inner-section">
                            <md-button class="me-default-button" ng-click="answer('cancel')">Cancel</md-button>
                            <md-button class="me-default-button" ng-click="addOrUpdateProducts()">Finish </md-button>
                        </div>
                    </div>
                    </div>
                </md-tab-body>
            </md-tab>
        </md-tabs>
    </md-dialog-content>


    <!--
    <div class="dialog-controls clearfix">
        <md-button class="me-default-button" ng-click="hide()">Close</md-button>
    </div>
    -->
</md-dialog>