<div ng-if="isAuthenticated">
    <!--Google Analytics-->
    <script>
        ga('set', 'page', 'technical-support');
        ga('send', 'pageview');
    </script>
    <div class="obl-dashboard-wrapper" ng-controller="HeaderController" ng-show="auth.isAuthenticated()">
        <div class="obl-dashboard-header clearfix">
            <h2 ng-hide="welcome"> </h2>
            <p  ng-hide="welcome"> Welcome to the technical support area</p>
            <div class="obl-dashboard-settings">
                <button class="user-settings-button" ng-click="profileView()" type="button">
                    <img src="images/user-icon.svg" alt="User Logo" />
                </button>
            </div>
        </div>

    </div>
</div>

<fieldset ng-style="myObj">
    <input type="text" ng-model="searchPublishApps" name="search">
    <input type="submit" value="search" class="me-search-button">
</fieldset>

<div class="obl-dashboard-wrapper">
    <!--<div class="obl-dashboard-apps">
     All Applications
    </div>-->



    <div class="md-dialog-main clearfix">

        <md-tabs md-center-tabs="false" md-selected="selectedIndex" md-no-ink="true" md-autoselect="false"
                 md-dynamic-height="true">
            <md-tab>
                <md-tab-label>App Details</md-tab-label>
                <md-tab-body>

        <form class="allItems" novalidate>
            <table class="table">
                <thead class="obl-dashboard-apps">
                <th width="18%" align="center">App ID</th>
                <th width="10%">App Name</th>
                <th width="10%">Email</th>
                <th width="12%">App Description</th>
                <th width="6%">Billing</th>
                <th width="10%">App Status</th>
                <!--<th width="20%">Action</th>-->
                <th width="6%">Comments</th>
                <!--<th>User Details</th>-->
                </thead>

                <tbody>
                <tr ng-repeat="app in appList | filter:searchPublishApps">
                    <td ng-click="showAppView(app.id,app.userId)">
                    <!--<a href="{{serverURL}}templates/viewWebTemplateUrl?userId={{app.userId}}&appId={{app.id}}&1493976247494/">-->
                        {{app.uniqueAppId}}
                    <!--</a>-->
                    </td>
                    <td>{{app.appName}}</td>
                    <td>
                        <div ng-repeat="user in userList">
                            <div ng-if="user.id==app.userId">
                                {{user.email}}
                            </div>
                        </div>
                    </td>
                    <td>
                         <a class="tech-support-description" ng-click="appDescriptionView(app.appName,getDes(app.id,'full'),app.id,app.userId)">{{getDes(app.id,'short')}}</a>
                    </td>
                    <td>
                        <button class="btn-material"  ng-click="approvedOperatorsView(app,userList,getDes(app.id,'manage'))">Manage</button>
                    </td>
                    <td>{{app.publishedStatus}}</td>
                <td align="center">
                    <u><md-icon ng-click="commentView(app.appName,app.id,getDes(app.id,'comment'),app.createdAt)" md-svg-icon="images/create-icon.svg"></md-icon></u>
                </td>
                </tr>
                </tbody>
            </table>
        </form> </md-tab-body>
            </md-tab>

            <md-tab ng-disabled="enableTab">

                <md-tab-label>Registered users </md-tab-label>
                <md-tab-body>
                    <dir-pagination-controls boundary-links="true" on-page-change="pageChangeHandler(newPageNumber)"
                                             template-url="vendor/angularUtils-pagination/dirPagination.tpl.html">

                    </dir-pagination-controls>
                    <form class="allItems" novalidate>
                    <table class="table">
                        <thead class="obl-dashboard-apps">
                        <th>ID</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Created Date</th>
                        <th>Last login</th>
                        <th>Number of Apps</th>
                        </thead>
                           <tbody>
                           <tr ng-repeat="app in userList">
                            <td> {{app.id}} </td>
                            <td>{{app.firstName}} {{app.lastName}}</td>
                               <td> {{app.email}} </td>
                               <td> {{app.createdAt | date:'yyyy-MM-dd HH:mm:ss' }} </td>
                               <td> {{app.lastLoginTime | date:'yyyy-MM-dd HH:mm:ss'}} </td>
                               <td> {{getAppsCount(app.id)}} </td>
                               <!--<td><a data-ng-click="getUserAppData(app.id)">{{app.id}}</a></td>-->
                           </tr>
                           </tbody>
                    </table>
                </form>
                </md-tab-body>
            </md-tab>

            <md-tab ng-disabled="true">
                <md-tab-label>Reports</md-tab-label>
                <md-tab-body>

            </md-tab>
        </md-tabs>
    </div>
</div>


