<div ng-if="isAuthenticated">
    <!--Google Analytics-->
    <script>
        ga('set', 'page', 'technical-support');
        ga('send', 'pageview');
    </script>
    <div class="obl-dashboard-wrapper" ng-controller="HeaderController" ng-show="auth.isAuthenticated()">
        <div class="obl-dashboard-header clearfix">
            <h2 ng-hide="welcome"> </h2>
            <p  ng-hide="welcome"> Welcome to the technical support area</p>
            <div class="obl-dashboard-settings">
                <button class="user-settings-button" ng-click="profileView()" type="button">
                    <img src="images/user-icon.svg" alt="User Logo" />
                </button>
            </div>
        </div>

    </div>
</div>

<fieldset ng-style="myObj">
    <input type="text" ng-model="searchPublishApps" name="search">
    <input type="submit" value="search" class="me-search-button">
</fieldset>

<div class="obl-dashboard-wrapper">
    <!--<div class="obl-dashboard-apps">
     All Applications
    </div>-->



    <div class="md-dialog-main clearfix">

        <md-tabs md-center-tabs="false" md-selected="selectedIndex" md-no-ink="true" md-autoselect="false"
                 md-dynamic-height="true">
            <md-tab>
                <md-tab-label>App Details</md-tab-label>
                <md-tab-body>

        <form class="allItems" novalidate>
            <table class="table">
                <thead class="obl-dashboard-apps">
                <th width="18%" align="center">App ID</th>
                <th width="10%">App Name</th>
                <th width="10%">Email</th>
                <th width="12%">App Description</th>
                <th width="6%">Billing</th>
                <th width="10%">App Status</th>
                <th width="20%">Action</th>
                <th width="6%">Comments</th>
                <!--<th>User Details</th>-->
                </thead>

                <tbody>
                <tr ng-repeat="app in appList | filter:searchPublishApps">
                    <td ng-click="showAppView(app.id,app.userId)">
                    <!--<a href="{{serverURL}}templates/viewWebTemplateUrl?userId={{app.userId}}&appId={{app.id}}&1493976247494/">-->
                        {{app.uniqueAppId}}
                    <!--</a>-->
                    </td>
                    <td>{{app.appName}}</td>
                    <td>
                        <div ng-repeat="user in userList">
                            <div ng-if="user.id==app.userId">
                                {{user.email}}
                            </div>
                        </div>
                    </td>
                    <td>
                        <!--<div ng-if="publishApps.appId == app.id" ng-click="appDescriptionView(app.appName,publishApps.fullDescription)">-->
                            <!--{{publishApps.shortDescription}}-->
                        <!--</div>-->
                        <a ng-click="appDescriptionView(app.appName,getDes(app.id,'full'),app.id,app.userId)">{{getDes(app.id,'short')}}</a>
                    </td>
                    <td>
                        <button ng-click="approvedOperatorsView(getDes(app.id,'manage'))" >Manage</button>

                    </td>
                    <td>{{getStatus(app.status)}}</td>
                    <td>
                        <div class="row">
                            <div data-ng-repeat="user in userList">
                                <div ng-if="user.id==app.userId">
                            <div class="col-sm-8">
                                <select ng-model= "publishStatus" ng-style ="{'background-color': getColor(publishStatus)}">
                                    <option ng-repeat="sts in getArr(publishStatus,app.publishStatus)" value="{{sts.code}}" >{{sts.description}}</option>
                                </select>
                            </div>
                            <div class="col-sm-3">
                                <button data-ng-click="apply(app.id,publishStatus,user.email,user.firstName,user.lastName,app.appName,app.userId,getDes(app.id,'manage'))">Apply</button>
                            </div>
                                </div>
                            </div>
                        </div>

                        <!--<a  ng-if="app.status=='PENDING'" data-ng-click="getPublishDetails(app.id,app.userId)">Publish</a>-->
                        <!--<a  ng-if="app.status=='PUBLISHED'" data-ng-click="getPublishDetails(app.id,app.userId)">Update</a>-->
                        <!--<a  ng-if="app.status=='UPLOADING'" data-ng-click="getPublishDetails(app.id,app.userId)">Finish</a>-->
                    </td>
                <td align="center">
                    <u><md-icon ng-click="commentView(app.appName,app.id,getDes(app.id,'comment'),app.createdAt)" md-svg-icon="images/create-icon.svg"></md-icon></u>
                </td>
                    <!--<td>-->
                        <!---->
                                <!--<a data-ng-click="sendApkEmail(user.email,user.firstName,user.lastName,app.appName,app.id,app.userId)">Send Email</a>-->
                         <!---->
                    <!--</td>-->
                </tr>
                </tbody>
            </table>
        </form> </md-tab-body>
            </md-tab>

            <!--<md-tab>-->
                <!--<md-tab-label>Ad Networks</md-tab-label>-->
                <!--<md-tab-body>-->

                    <!--<form class="allItems" novalidate>-->
                        <!--<table class="table">-->
                            <!--<thead class="obl-dashboard-apps">-->
                            <!--<th>Add network name</th>-->
                            <!--<th>Clickid</th>-->
                            <!--<th>AFfid</th>-->
                            <!--<th>Return URL</th>-->
                            <!--<th>Action</th>-->
                            <!--&lt;!&ndash;<th>User Details</th>&ndash;&gt;-->
                            <!--</thead>-->

                            <!--<tbody>-->
                            <!--<tr ng-repeat="app in addNetworkList">-->
                                <!--<td>{{app.adagentname}}</td>-->
                                <!--<td>{{app.clickid}}</td>-->
                                <!--<td>{{app.affid}}</td>-->
                                <!--<td>{{app.returnurl}}</td>-->
                                <!--<td>-->
                                    <!--<a data-ng-click="adNetworkDetails(app)">Edit</a>-->
                                    <!--/-->
                                    <!--<a data-ng-click="deleteAdNetwork(app)">Delete</a>-->
                                <!--</td>-->
                               <!--</tr>-->
                            <!--</tbody>-->
                        <!--</table>-->
                        <!--<div><a href="#/viewAdNetworks/"> + Add new network</a></div>-->
                    <!--</form> </md-tab-body>-->
            <!--</md-tab>-->
            <!--<md-tab>-->
                <!--<md-tab-label>Users from Ad Networks</md-tab-label>-->
                <!--<md-tab-body>-->

                    <!--<form class="allItems" novalidate>-->
                        <!--<table class="table">-->
                            <!--<thead class="obl-dashboard-apps">-->
                            <!--<th>User Name</th>-->
                            <!--<th>Ad network</th>-->
                            <!--<th>AFFID</th>-->
                            <!--<th>Created Date</th>-->
                            <!--<th>Last login</th>-->
                            <!--<th>isActive</th>-->
                            <!--<th>Login Count</th>-->
                            <!--</thead>-->
                            <!--<tbody>-->
                            <!--<tr ng-repeat="app in adUserList">-->
                                    <!--<td> {{app.email}} </td>-->
                                    <!--<td> {{app.adagent}} </td>-->
                                    <!--<td> {{app.affid}} </td>-->
                                    <!--<td> {{app.createdAt}} </td>-->
                                    <!--<td> {{app.lastLoginTime}} </td>-->
                                    <!--<td> {{app.isActive}} </td>-->
                                    <!--<td> {{app.loginCount}} </td>-->
                            <!--</tr>-->
                            <!--</tbody>-->
                        <!--</table>-->
                        <!--<div><a href="#/viewAdNetworks/"></a></div>-->
                    <!--</form> </md-tab-body>-->
            <!--</md-tab>-->
            <md-tab ng-disabled="enableTab">

                <md-tab-label>Registered users </md-tab-label>
                <md-tab-body>
                    <dir-pagination-controls boundary-links="true" on-page-change="pageChangeHandler(newPageNumber)"
                                             template-url="vendor/angularUtils-pagination/dirPagination.tpl.html">

                    </dir-pagination-controls>
                    <form class="allItems" novalidate>
                    <table class="table">
                        <thead class="obl-dashboard-apps">
                        <th>ID</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Created Date</th>
                        <th>Last login</th>
                        <th>Number of Apps</th>
                        </thead>
                           <tbody>
                           <tr ng-repeat="app in userList">
                            <td> {{app.id}} </td>
                            <td>{{app.firstName}} {{app.lastName}}</td>
                               <td> {{app.email}} </td>
                               <td> {{app.createdAt | date:'yyyy-MM-dd HH:mm:ss' }} </td>
                               <td> {{app.lastLoginTime | date:'yyyy-MM-dd HH:mm:ss'}} </td>
                               <td> {{getAppsCount(app.id)}} </td>
                               <!--<td><a data-ng-click="getUserAppData(app.id)">{{app.id}}</a></td>-->
                           </tr>
                           </tbody>
                    </table>
                </form>
                </md-tab-body>
            </md-tab>

            <md-tab ng-disabled="true">
                <md-tab-label>Reports</md-tab-label>
                <md-tab-body>

            </md-tab>
        </md-tabs>
    </div>
</div>


