<br>
<br>
<h1>Edit User Details</h1>
<br>
<form [formGroup]="userEditForm">

  <label>Change Name</label>
  <input type="checkbox" ngControl="tradeSource" [checked]="nameEditable" (change)="toggleName($event)">
  <div *ngIf="nameEditable" class="form-group">
    <label>First Name:</label>
    <!-- Rather than set an ngModel, we use the formControl directive to sync our input to the userEditForm object. Notice that we are also setting the attribute we wish the corresponding input to sync with. We no longer need the name attribute, but can optionally add it. -->
    <input id=fname class="form-control" type="text" placeholder="Arstina" [formControl]="userEditForm.controls['fName']" required>

    <div *ngIf="userEditForm.controls['fName'].hasError('required')
    && userEditForm.controls['fName'].touched" class="alert alert-danger">
      You must include a First name.
    </div>
    <div *ngIf="!userEditForm.controls['fName'].valid" class="alert alert-danger">
      First Name must only include Alphabetic character
    </div>

  </div>
  <div *ngIf="nameEditable" class="form-group">
    <label>Last Name:</label>
    <!-- Rather than set an ngModel, we use the formControl directive to sync our input to the userEditForm object. Notice that we are also setting the attribute we wish the corresponding input to sync with. We no longer need the name attribute, but can optionally add it. -->
    <input class="form-control" type="text" placeholder="kale" [formControl]="userEditForm.controls['lName']">

    <div *ngIf="userEditForm.controls['lName'].hasError('required')
    && userEditForm.controls['lName'].touched" class="alert alert-danger">
      You must include a Last name.
    </div>
    <div *ngIf="!userEditForm.controls['lName'].valid" class="alert alert-danger">
      Last Name must only include Alphabetic character
    </div>
  </div>
  <button *ngIf="nameEditable" (click)="editUserName(userEditForm.value)">Change Name</button>
  <br>
  <br>

  <label>change Email</label>
  <input [checked]="emailEditable" type="checkbox" (change)="toggleEmail($event)">
  <div *ngIf="emailEditable" class="form-group">
    <label>Old Email:</label>
    <!-- Rather than set an ngModel, we use the formControl directive to sync our input to the userEditForm object. Notice that we are also setting the attribute we wish the corresponding input to sync with. We no longer need the name attribute, but can optionally add it. -->
    <input class="form-control" width="50%" [readonly]="true" type="text" placeholder="you@example.com" [formControl]="userEditForm.controls['email']">

    <div *ngIf="userEditForm.controls['email'].hasError('required')
    && userEditForm.controls['email'].touched" class="alert alert-danger">
      You must include an email.
    </div>
    <div *ngIf="!userEditForm.controls['email'].valid" class="alert alert-danger">
      invalid Email
    </div>
    <br>
    <label>New Email:</label>
    <input class="form-control" width="50%" type="text" placeholder="Enter New Email" [formControl]="userEditForm.controls['emailRe']">
    <div *ngIf="userEditForm.controls['emailRe'].hasError('required')
    && userEditForm.controls['emailRe'].touched && userEditForm.controls['emailRe'].dirty" class="alert alert-danger">
      You must include an email.
    </div>
    <div *ngIf=" userEditForm.controls['emailRe'].touched && userEditForm.controls['emailRe'].dirty && !userEditForm.controls['emailRe'].valid"
      class="alert alert-danger">
      invalid Email
    </div>
    <br>
    <button (click)="changeEmail(userEditForm.value)" [disabled]="!userEditForm.controls['emailRe'].valid || !userEditForm.controls['email'].valid">
      Change Email</button>
  </div>
  <br>
  <br>
  <!-- ***************************   Password    **************************** -->
  <label>change password</label>
  <input [checked]="passwordEditable" type="checkbox" (change)="togglePassword($event)">
  <div *ngIf="passwordEditable" class="form-group">
    <label>Current Password:</label>
    <!-- Rather than set an ngModel, we use the formControl directive to sync our input to the userEditForm object. Notice that we are also setting the attribute we wish the corresponding input to sync with. We no longer need the name attribute, but can optionally add it. -->
    <input class="form-control" width="50%" type="password" [formControl]="userEditForm.controls['password']">
    <div *ngIf="userEditForm.controls['password'].hasError('required')
    && userEditForm.controls['password'].touched && userEditForm.controls['password'].dirty" class="alert alert-danger">
      You must include the current password.
    </div> <div *ngIf=" userEditForm.controls['password'].touched && userEditForm.controls['password'].dirty && !userEditForm.controls['password'].valid"
      class="alert alert-danger">
      Your password should contain UpperCase, LowerCase and number
    </div>
    </div>
    <br>
    <div *ngIf="passwordEditable" class="form-group">
    <label>New Password:</label>
    <!-- Rather than set an ngModel, we use the formControl directive to sync our input to the userEditForm object. Notice that we are also setting the attribute we wish the corresponding input to sync with. We no longer need the name attribute, but can optionally add it. -->
    <input class="form-control" width="50%" type="password" [formControl]="userEditForm.controls['passwordNew']">
    <div *ngIf="userEditForm.controls['passwordNew'].hasError('required')
    && userEditForm.controls['passwordNew'].touched && userEditForm.controls['passwordNew'].dirty" class="alert alert-danger">
      You must include the password.
    </div> 

    <div *ngIf=" userEditForm.controls['passwordNew'].touched && userEditForm.controls['passwordNew'].dirty && !userEditForm.controls['passwordNew'].valid"
      class="alert alert-danger">
      Your password should contain UpperCase, LowerCase and number
    </div>
    <br>


    <label>Confirm Password:</label>
    <!-- Rather than set an ngModel, we use the formControl directive to sync our input to the userEditForm object. Notice that we are also setting the attribute we wish the corresponding input to sync with. We no longer need the name attribute, but can optionally add it. -->
    <input class="form-control" width="50%" type="password" [formControl]="userEditForm.controls['passwordConfirm']">
    <div *ngIf="userEditForm.controls['passwordConfirm'].hasError('required')
    && userEditForm.controls['passwordConfirm'].touched && userEditForm.controls['passwordConfirm'].dirty" class="alert alert-danger">
      You must include the password.
    </div> 
    <div *ngIf=" userEditForm.controls['passwordConfirm'].touched && userEditForm.controls['passwordConfirm'].dirty && !userEditForm.controls['passwordConfirm'].valid"
      class="alert alert-danger">
Password Missmatch
    </div>
    <br>
    <button (click)="changePassword(userEditForm.value)" [disabled]="!userEditForm.controls['password'].valid || !userEditForm.controls['passwordConfirm'].valid || !userEditForm.controls['passwordNew'].valid">
      Change Password</button>
  </div>
  <br>


  <!-- ***************************   Phone    **************************** -->

  <label>change Phone number</label>
  <input [checked]="phoneEditable" type="checkbox" (change)="togglePhone($event)">
  <div *ngIf="phoneEditable" class="form-group">
    <label>Phone :</label>
    <!-- Rather than set an ngModel, we use the formControl directive to sync our input to the userEditForm object. Notice that we are also setting the attribute we wish the corresponding input to sync with. We no longer need the name attribute, but can optionally add it. -->
    <input class="form-control" type="text" placeholder="+94712345678" [formControl]="userEditForm.controls['phone']">

    <div *ngIf="userEditForm.controls['phone'].hasError('required')
    && userEditForm.controls['phone'].touched" class="alert alert-danger">
      You must include a Phone Number.
    </div>
    <div *ngIf="!userEditForm.controls['phone'].valid" class="alert alert-danger">
      Enter a valid Phone Number (ex: +94123456789)
    </div>

  </div>
  <br>
  <button *ngIf="phoneEditable" (click)="editUserPhone(userEditForm.value)">Change Phone</button>
  <br>

  <label>change Address</label>
  <input [checked]="addressEditable" type="checkbox" (change)="toggleAddress($event)">
  <div *ngIf="addressEditable" class="form-group">
    <label>House/Apartment Number:</label>
    <!-- Rather than set an ngModel, we use the formControl directive to sync our input to the userEditForm object. Notice that we are also setting the attribute we wish the corresponding input to sync with. We no longer need the name attribute, but can optionally add it. -->
    <input class="form-control" type="text" placeholder="#244 A" [formControl]="userEditForm.controls['streetNo']">

    <div *ngIf="userEditForm.controls['streetNo'].hasError('required')
    && userEditForm.controls['streetNo'].touched" class="alert alert-danger">
      You must include Street Number.
    </div>

  </div>
  <div *ngIf="addressEditable" class="form-group">
    <label>street Name:</label>
    <!-- Rather than set an ngModel, we use the formControl directive to sync our input to the userEditForm object. Notice that we are also setting the attribute we wish the corresponding input to sync with. We no longer need the name attribute, but can optionally add it. -->
    <input class="form-control" type="text" placeholder="Your Road" [formControl]="userEditForm.controls['streetName']">

    <div *ngIf="userEditForm.controls['streetName'].hasError('required')
    && userEditForm.controls['streetName'].touched" class="alert alert-danger">
      You must include Street Name.
    </div>
  </div>
  <div *ngIf="addressEditable" class="form-group">
    <label>City:</label>
    <!-- Rather than set an ngModel, we use the formControl directive to sync our input to the userEditForm object. Notice that we are also setting the attribute we wish the corresponding input to sync with. We no longer need the name attribute, but can optionally add it. -->
    <input class="form-control" type="text" placeholder="Your City" [formControl]="userEditForm.controls['city']">

    <div *ngIf="userEditForm.controls['city'].hasError('required')
    && userEditForm.controls['city'].touched" class="alert alert-danger">
      You must include a City.
    </div>

  </div>
  <div *ngIf="addressEditable" class="form-group">
    <label>Postal Code/ZIP:</label>
    <!-- Rather than set an ngModel, we use the formControl directive to sync our input to the userEditForm object. Notice that we are also setting the attribute we wish the corresponding input to sync with. We no longer need the name attribute, but can optionally add it. -->
    <input class="form-control" type="text" placeholder="70000" [formControl]="userEditForm.controls['zip']">

    <div *ngIf="userEditForm.controls['zip'].hasError('required')
    && userEditForm.controls['zip'].touched" class="alert alert-danger">
      You must include zip code.
    </div>
    <div *ngIf="!userEditForm.controls['zip'].valid" class="alert alert-danger">
      invalid zip code
    </div>
  </div>
  <label *ngIf="addressEditable">Country:</label>
  <select *ngIf="addressEditable" id="country" class="form-control" formControlName="country" (change)="countryChanged()">
    <option *ngFor="let c of countries" [ngValue]="c.countryName">
      {{c.countryName}}
    </option>
  </select>
  <br>
  <button *ngIf="addressEditable" (click)="editUserAddress(userEditForm.value)">Change Address</button>

</form>
<br>
<br>