<div class="page-container">

  <form [formGroup]="userEditForm" class="container main-content-font account">
    <h1 class="maint-header-font">Edit My Details</h1>
    <br>
    <br>

    <!-- ***************************   Name    **************************** -->
    <div class="row">
      <div class="form-group col-xs-6">
        <label>First Name:</label>
        <!-- Rather than set an ngModel, we use the formControl directive to sync our input to the userEditForm object. Notice that we are also setting the attribute we wish the corresponding input to sync with. We no longer need the name attribute, but can optionally add it. -->
        <input id=fname class="form-control" type="text" placeholder="Arstina" [formControl]="userEditForm.controls['fName']" required>

        <div *ngIf="userEditForm.controls['fName'].hasError('required')
        && userEditForm.controls['fName'].touched" class="alert alert-danger">
          You must include a First name.
        </div>
        <div *ngIf="!userEditForm.controls['fName'].valid" class="alert alert-danger">
          First Name must only include Alphabetic character
        </div>
      </div>
      <div class="form-group col-xs-6">
        <label>Last Name:</label>
        <!-- Rather than set an ngModel, we use the formControl directive to sync our input to the userEditForm object. Notice that we are also setting the attribute we wish the corresponding input to sync with. We no longer need the name attribute, but can optionally add it. -->
        <input class="form-control" type="text" placeholder="kale" [formControl]="userEditForm.controls['lName']">

        <div *ngIf="userEditForm.controls['lName'].hasError('required')
        && userEditForm.controls['lName'].touched" class="alert alert-danger">
          You must include a Last name.
        </div>
        <div *ngIf="!userEditForm.controls['lName'].valid" class="alert alert-danger">
          Last Name must only include Alphabetic character
        </div>
       </div>
    </div>

    <!-- ***************************   Email    **************************** -->
    <div class="row">
      <div class="form-group col-xs-12">
        <label>Old Email:</label>
        <!-- Rather than set an ngModel, we use the formControl directive to sync our input to the userEditForm object. Notice that we are also setting the attribute we wish the corresponding input to sync with. We no longer need the name attribute, but can optionally add it. -->
        <input class="form-control" width="50%" [readonly]="true" type="text" placeholder="you@example.com" [formControl]="userEditForm.controls['email']">
      </div>
      <div class="form-group col-xs-12">
        <label>New Email:</label>
        <input class="form-control" width="50%" type="text" placeholder="Enter New Email" [formControl]="userEditForm.controls['emailRe']">
        <div *ngIf=" userEditForm.controls['emailRe'].touched && userEditForm.controls['emailRe'].dirty && userEditForm.controls['emailRe'].invalid && userEditForm.controls['emailRe'].value != ''"
             class="alert alert-danger">
          invalid Email!
        </div>
        <div *ngIf="isEmailDuplicate"
             class="alert alert-danger animated fadeIn">
           This email already exists!
        </div>
      </div>
    </div>



    <!-- ***************************   Phone    **************************** -->

    <div class="row">
      <div class="form-group col-xs-12">
        <label>Phone :</label>
        <!-- Rather than set an ngModel, we use the formControl directive to sync our input to the userEditForm object. Notice that we are also setting the attribute we wish the corresponding input to sync with. We no longer need the name attribute, but can optionally add it. -->
        <input class="form-control" type="text" placeholder="+94712345678" [formControl]="userEditForm.controls['phone']">

        <div *ngIf="userEditForm.controls['phone'].hasError('required')
        && userEditForm.controls['phone'].touched" class="alert alert-danger">
          You must include a Phone Number.
        </div>
        <div *ngIf="!userEditForm.controls['phone'].valid" class="alert alert-danger">
          Enter a valid Phone Number (ex: +94123456789)
        </div>
      </div>
    </div>



    <!-- ***************************   Address    **************************** -->

    <div class="row">
      <div class="form-group col-xs-6">
        <label>House/Apartment Number:</label>
        <!-- Rather than set an ngModel, we use the formControl directive to sync our input to the userEditForm object. Notice that we are also setting the attribute we wish the corresponding input to sync with. We no longer need the name attribute, but can optionally add it. -->
        <input class="form-control" type="text" placeholder="#244 A" [formControl]="userEditForm.controls['streetNo']">

        <div *ngIf="userEditForm.controls['streetNo'].hasError('required')
        && userEditForm.controls['streetNo'].touched" class="alert alert-danger">
          You must include Street Number.
        </div>
      </div>
      <div class="form-group col-xs-6">
        <label>street Name:</label>
        <!-- Rather than set an ngModel, we use the formControl directive to sync our input to the userEditForm object. Notice that we are also setting the attribute we wish the corresponding input to sync with. We no longer need the name attribute, but can optionally add it. -->
        <input class="form-control" type="text" placeholder="Your Road" [formControl]="userEditForm.controls['streetName']">

        <div *ngIf="userEditForm.controls['streetName'].hasError('required')
        && userEditForm.controls['streetName'].touched" class="alert alert-danger">
          You must include Street Name.
        </div>
      </div>
      <div class="form-group col-xs-6">
        <label>City:</label>
        <!-- Rather than set an ngModel, we use the formControl directive to sync our input to the userEditForm object. Notice that we are also setting the attribute we wish the corresponding input to sync with. We no longer need the name attribute, but can optionally add it. -->
        <input class="form-control" type="text" placeholder="Your City" [formControl]="userEditForm.controls['city']">

        <div *ngIf="userEditForm.controls['city'].hasError('required')
        && userEditForm.controls['city'].touched" class="alert alert-danger">
          You must include a City.
        </div>
      </div>
      <div class="form-group col-xs-6">
        <label>Postal Code/ZIP:</label>
        <!-- Rather than set an ngModel, we use the formControl directive to sync our input to the userEditForm object. Notice that we are also setting the attribute we wish the corresponding input to sync with. We no longer need the name attribute, but can optionally add it. -->
        <input class="form-control" type="text" placeholder="70000" [formControl]="userEditForm.controls['zip']">

        <div *ngIf="userEditForm.controls['zip'].hasError('required')
        && userEditForm.controls['zip'].touched" class="alert alert-danger">
          You must include zip code.
        </div>
        <div *ngIf="!userEditForm.controls['zip'].valid" class="alert alert-danger">
          invalid zip code
        </div>
      </div>
      <div class="form-group col-xs-6">
        <label >Country:</label>
        <select  id="country" class="form-control" formControlName="country" (change)="countryChanged()">
          <option *ngFor="let c of countries" [ngValue]="c.countryName">
            {{c.countryName}}
          </option>
        </select>
      </div>
      <div class="form-group col-xs-12">
        <div *ngIf="isSuccessDetails"
             class="alert alert-success animated fadeIn">
          Successfully Changed!
        </div>
        <button [disabled]="userEditForm.controls['fName'].invalid ||
                            userEditForm.controls['lName'].invalid ||
                            userEditForm.controls['emailRe'].invalid ||
                            userEditForm.controls['phone'].invalid ||
                            userEditForm.controls['streetNo'].invalid ||
                            userEditForm.controls['streetName'].invalid ||
                            userEditForm.controls['city'].invalid ||
                            userEditForm.controls['zip'].invalid ||
                            userEditForm.controls['country'].invalid"
                (click)="editUserDetails(userEditForm.value)" class="btn btn-d main-button">Change Details</button>
      </div>
    </div>

    <!-- ***************************   Password    **************************** -->
    <div class="radio">
      <label>
        <input [checked]="passwordEditable" type="radio" (change)="togglePassword($event)">
        Change Password
      </label>
    </div>
    <div *ngIf="passwordEditable"  class="row">
      <div class="form-group col-xs-12">
        <label>Current Password:</label>
        <!-- Rather than set an ngModel, we use the formControl directive to sync our input to the userEditForm object. Notice that we are also setting the attribute we wish the corresponding input to sync with. We no longer need the name attribute, but can optionally add it. -->
        <input class="form-control" width="50%" type="password" [formControl]="userEditForm.controls['password']">
        <div *ngIf="userEditForm.controls['password'].hasError('required')
        && userEditForm.controls['password'].touched && userEditForm.controls['password'].dirty" class="alert alert-danger">
          You must include the current password.
        </div>
      </div>
      <div class="form-group col-xs-6">
        <label>New Password:</label>
        <!-- Rather than set an ngModel, we use the formControl directive to sync our input to the userEditForm object. Notice that we are also setting the attribute we wish the corresponding input to sync with. We no longer need the name attribute, but can optionally add it. -->
        <input class="form-control" width="50%" type="password" [formControl]="userEditForm.controls['passwordNew']">
        <div *ngIf="userEditForm.controls['passwordNew'].hasError('required')
        && userEditForm.controls['passwordNew'].touched && userEditForm.controls['passwordNew'].dirty" class="alert alert-danger">
          You must include the password.
        </div>

        <div *ngIf=" userEditForm.controls['passwordNew'].touched && userEditForm.controls['passwordNew'].dirty && !userEditForm.controls['passwordNew'].valid"
             class="alert alert-danger">
          Your password should contain UpperCase, LowerCase and number
        </div>
      </div>
      <div class="form-group col-xs-6">
        <label>Confirm Password:</label>
        <!-- Rather than set an ngModel, we use the formControl directive to sync our input to the userEditForm object. Notice that we are also setting the attribute we wish the corresponding input to sync with. We no longer need the name attribute, but can optionally add it. -->
        <input class="form-control" width="50%" type="password" [formControl]="userEditForm.controls['passwordConfirm']">
        <div *ngIf="userEditForm.controls['passwordConfirm'].hasError('required')
        && userEditForm.controls['passwordConfirm'].touched && userEditForm.controls['passwordConfirm'].dirty" class="alert alert-danger">
          You must include the password.
        </div>
        <div *ngIf=" userEditForm.controls['passwordConfirm'].touched && userEditForm.controls['passwordConfirm'].dirty && !userEditForm.controls['passwordConfirm'].valid"
             class="alert alert-danger">
          Password Missmatch
        </div>
      </div>
      <div class="form-group col-xs-12">
        <div *ngIf="isSuccessPassword"
             class="alert alert-success animated fadeIn">
          Successfully Changed!
        </div>
        <div *ngIf="isInvalidPassword"
             class="alert alert-danger animated fadeIn">
          Current password is incorrect, Please try again!
        </div>
        <button class="btn btn-d main-button" (click)="changePassword(userEditForm.value)" [disabled]="!userEditForm.controls['password'].valid || !userEditForm.controls['passwordConfirm'].valid || !userEditForm.controls['passwordNew'].valid">
          Change Password</button>
      </div>
    </div>


  </form>
</div>
